# Add these lines to your ~/.bashrc and maybe your /root/.bashrc files:
#
#     WKPROJECTS=<your projects directory here>
#     . $WKPROJECTS/utils/utils
#     . $WKPROJECTS/utils/parrot_utils
#
# If you don't set WKPROJECTS, it will default to "/home/andrew/projects"
WKPROJECTS=${WKPROJECTS:-'/home/andrew/projects'}

# Number of simultaneous threads we use for make. This should be
# number_of_processors + 1, though on some systems where performance
# isn't a big issue I won't tune it.
WKNUMTHREADS=3

alias mj="make -j$WKNUMTHREADS"
alias projects="cd $WKPROJECTS && PS1='\n<projects> ' && ls --color=always"
alias ll="ls -l"
alias la="ls -a"

# Pick an editor to launch when I lazily type "e". Start with preferences
WKEDITORLIST=( gedit kwrite medit )
WKEDITORLISTCNT=${#WKEDITORLIST[@]}
WKIVAR=0
WKEINTERNAL="echo 'no editors found'"
while [ "$WKIVAR" -lt "$WKEDITORLISTCNT" ];
do
    which ${WKEDITORLIST[WKIVAR]} &> /dev/null && WKEINTERNAL=${WKEDITORLIST[WKIVAR]}
    ((WKIVAR++))
done
alias e=$WKEINTERNAL

# Figure out what the package manager on this system is. Also, we'll use this
# to make sweeping generalizations about the distro we're using
WKPKGMANAGERLIST=( apt-get yum pkg zypper )
WKDISTROLIST=( Debian Fedora Solaris SuSE )
WKPKGMANAGERLISTCNT=${#WKPKGMANAGERLIST[@]}
WKIVAR=0
WKGETINTERNAL="echo 'no package managers found'"
while [ "$WKIVAR" -lt "$WKPKGMANAGERLISTCNT" ]
do
    if which ${WKPKGMANAGERLIST[WKIVAR]} &> /dev/null; then
        WKGETINTERNAL=${WKPKGMANAGERLIST[WKIVAR]}
        WKDISTROTYPE=${WKDISTROLIST[WKIVAR]}
    fi
    ((WKIVAR++))
done
alias getpkg="sudo $WKGETINTERNAL install"
WKDISTROTYPE=${WKDISTROTYPE:-"Unknown"}

# Display some basic information in a header on console startup
echo "system: $WKDISTROTYPE - editor: $WKEINTERNAL - packager: $WKGETINTERNAL"

function __update_version {
    WKPGVERSION=$(perl $WKPROJECTS/utils/get_version.pl)
    WKPGPROJECT=${WKPGPROJECT:-$(pwd)}
    PS1="\n<$WKPGPROJECT $WKPGVERSION> "
}

function pg {
    WKPGPROJECT=$1
    cd $WKPROJECTS/$1 && __update_version
    pwd
}

function up {
    if [ -e ".svn" ]; then
        svn update
        __update_version
        return
    fi
    if [ -e ".git" ]; then
        git pull
        return
    fi
}


